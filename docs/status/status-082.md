# status-082: Phase S ロードマップ策定 — 1000本撚線スケーラビリティ計画

[← README](../../README.md) | [← status-index](status-index.md)

- **日付**: 2026-02-28
- **テスト数**: 1850（変更なし）
- **ブランチ**: claude/friction-contact-wire-test-BSSZ8

## 概要

1000本撚線（~102,000 DOF, 接触ペア 20,000-50,000）への段階的スケールアップ計画「Phase S（スケーラビリティ）」をロードマップに策定した。コード変更なし、ドキュメント更新のみ。

## 背景

現状のコードベース調査（GPU/並列/メモリ/疎行列/テスト規模）を実施し、以下を確認:

- **GPU**: FEM計算にはGPU未使用（PyTorch は ML サロゲートのみ）
- **並列化**: 全て逐次実行（multiprocessing/joblib/numba 不使用）
- **最大テスト規模**: ~768 DOF（32セグメント交差梁）— 目標の 1/133
- **疎行列**: CSR/COO/LIL を適切に使用、アセンブリは事前割当て済み
- **メモリ**: 要素キャッシュ・コンプライアンスメモ化あり、良好な規律

## Phase S ロードマップ

| Phase | 内容 | 優先度 | 判断ポイント |
|-------|------|--------|-------------|
| **S1** | Mortar 離散化 + 同層除外フィルタ + NCP摩擦統合 | 最高 | 7本撚りで貫入率 < 1% 確認 |
| **S2** | CPU バッチ & 並列処理（要素並列, broadphase並列, GMRES自動切替） | 高 | — |
| **S3** | 91本撚りまでの段階的BM（19→37→61→91本） | 高 | 91本で収束 + 実用的計算時間 |
| **S4** | HEX8連続体 vs 素線被膜シース 剛性比較BM | 中 | ⚠️ 結果次第で方針調整 |
| **S5** | ML導入（接触プリスクリーニングGNN + k_pen推定） | 中 | S4結果でMLターゲット調整 |
| **S6** | 1000本撚線トライ | 中 | ⚠️ 結果次第でGPU化方針調整 |
| **S7** | GPU対応（CuPy/JAX疎行列, GPU GMRES） | 低 | S6結果で手法選定 |

### 設計判断

1. **Mortar 離散化は必須**: セグメント境界での接触力ジャンプは撚線の準平行接触で確実に発生する。L2+L3で代替可能という当初見通しを修正。
2. **同層除外**: 同層素線は等角配置で物理的に接触しにくい。オプション（デフォルト有効）として実装し、~80%のペア削減を見込む。
3. **S4とS6が判断ポイント**: 剛性比較BMと1000本トライの結果で後続の方針を調整。

### 接触ペア数の試算

```
1000本, 5層の場合:
  全ペア候補 (brute force): ~500,000
  同層除外後（層間のみ）:    ~100,000  (80%削減)
  broadphase後:             ~20,000-50,000
```

## ファイル変更

### 新規
- `docs/status/status-082.md` — 本ステータス

### 変更
- `docs/roadmap.md` — Phase S セクション新設、TODO一覧刷新、依存関係図更新
- `docs/status/status-index.md` — status-082 追加
- `README.md` — 現在の状態にPhase S言及追加
- `CLAUDE.md` — 現在の状態更新

## 未解決（引き継ぎ）

次の実装タスク:
1. **S1: C6-L5 Mortar 離散化** — 参考: Bosten et al. (2022), Gay Neto & Wriggers (2020)
2. **S1: 同層除外フィルタ** — `ContactConfig.exclude_same_layer` オプション追加
3. **S1: NCP 摩擦統合** — NCP ソルバーに Coulomb 摩擦の NCP 定式化を追加

---
