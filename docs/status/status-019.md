# status-019: ロードマップ大幅修正（Codex による構造破壊の修復）

[← README](../../README.md) | [ロードマップ](../roadmap.md) | [前回: status-015](./status-015.md)

**日付**: 2026-02-14
**作業者**: Claude Code
**ブランチ**: `master`

---

## 背景

status-016〜018 で Codex がロードマップの優先順位を3回連続で変更した。

- status-016: 「接触モジュール即着手」→ Phase C0 の即時開始を TODO に設定
- status-017: 「接触先行アプローチ」→ ファイバー理論ではなく接触観測を先行と再定義
- status-018: 「接触は Phase 5 後に後ろ倒し」→ 016/017 を覆して Phase 3→4→5→接触の順序に再変更

方針の三転自体は議論の過程として理解できるが、結果としてロードマップに以下の問題が発生していた。

---

## 修正した問題点

### 1. 構造の破壊

- **接触モジュールセクションが Phase 定義の前に浮いていた**: 「現在地」と Phase 1 の間に「接触モジュール（着手時期を後ろ倒し）」が挿入されており、Phase の論理的流れが断絶
- **Phase 4.6 内に接触の実行順序が重複記載**: 接触セクションと Phase 4.6 内の Step 0〜4 が同じ情報を異なる形式で持っていた

**修正**: 接触を独立した「Phase C」として Phase 5 の後に配置。Phase 4.6（撚線モデル）は Phase C の後に配置。重複を排除。

### 2. チェックボックスの虚偽

- **Phase 4.3 Rayleigh 減衰が `[ ]`**: `numerical_tests/frequency.py` で実装済み（`C = αM + βK`）
- **Phase 5.2 整合質量行列が全て `[ ]`**: `frequency.py` の `_beam2d_consistent_mass_local()` / `_beam3d_consistent_mass_local()` で実装済み
- **Phase 5.3 Rayleigh 減衰が `[ ]`**: Phase 4.3 と重複かつ実装済み
- **Phase 4.6 の Step 0（Phase 3 完了）が `[x]`**: Phase 3 は NR 基盤のみで弧長法・ベンチマーク未完

**修正**: 実装済み項目に `[x]` を付与。Phase 5 に「Phase 2.6 で先行実装済み」の注記を追加。Phase 4.6 Step 0 のチェックを外した（Phase 4.6 の実行順序リスト自体を削除し、Level 0/1/2 のみ残す）。

### 3. Phase 4.6 の設計文書肥大化（~200行）

ロードマップ内に撚線モデルの詳細設計（内部変数表、構成則の数式、接触ペア管理、ファイバー理論との差異解説、設計上の警告）が約200行にわたって展開されていた。これはロードマップではなく設計文書の内容。

**修正**: Phase 4.6 を設計判断・実装レベル・参考文献に絞り、約40行に圧縮。詳細設計は既存の `cosserat-design.md` および `contact/beam_beam_contact_spec_v0.1.md` を参照先として維持。

### 4. 「現在地」の不正確なタイトル

「Phase 3 非線形拡張の完了優先 + Phase 4/5先行」は Codex の方針変更メモであり、プロジェクトの現在位置を表していなかった。

**修正**: 「Phase 3 進行中」に変更。実態を簡潔に記述。

### 5. 依存関係図の不整合

Phase 5 が Phase 4 の後に来る図だったが、実際には Phase 3 完了後に Phase 4/5/C は並行可能。Phase 4.6 は Phase C 完了が前提。

**修正**: 依存関係図を実態に合わせて更新。

### 6. Phase 8 から接触・多体連成を除去

接触が Phase C として独立したため、Phase 8.1「接触・多体連成」は Phase C と重複。

**修正**: Phase 8 から除去。

### 7. Phase 3.2 の整理

共回転定式化のセクションに Cosserat 非線形（四元数NR更新）と共回転（ローカルフレーム追従）が混在していた。

**修正**: 3.2 を「Cosserat非線形」（主軸）、3.3 を「共回転定式化（オプション）」に分離。

### 8. README.md の更新

- 現在の状態を簡潔に書き直し（冗長な実装リストを3行に圧縮）
- status-016〜018（Codex の方針三転分）を status リンクから除去
- 最新ステータスを status-019 に更新

---

## 変更ファイル一覧

| ファイル | 変更種別 |
|---------|---------|
| `docs/roadmap.md` | 全面書き直し（742行 → 676行） |
| `README.md` | 現在の状態・ドキュメントリンク更新 |
| `docs/status/status-019.md` | **新規** — 本ステータス |

---

## 引き継ぎメモ（Codex/Claude 2交代運用）

- **status-016〜018 は参考記録として残すが、ロードマップの正として参照しないこと**。正は roadmap.md のみ。
- ロードマップを変更する際は、実コードの実装状況を確認してからチェックボックスを更新すること。
- 設計の詳細はロードマップに書かず、専用の設計文書に分離すること。
- 次の作業は Phase 3 の残り（弧長法、四元数非線形歪み、Euler elastica）。
